import{u as $,c as D,r as l,j as e,a as E}from"./index-B1L7_XIM.js";function L(){const{centers:d,loading:j}=$(),{allTerms:u,selectedTerm:n,setSelectedTerm:p,activeTerm:A,loading:b}=D(),[a,f]=l.useState("6293"),[t,v]=l.useState(""),[c,o]=l.useState("عضو هیات علمی"),[h,N]=l.useState([]),[g,m]=l.useState(!1),[x,i]=l.useState(null),[r,y]=l.useState(null),C=["شنبه","یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه"];async function T(){if(!n||!a||!t){i("لطفاً ترم، مرکز و روز هفته را انتخاب کنید");return}m(!0),i(null);try{const s=await E.get(`/api/reports/TeachersByCenterDay/${n}/${a}/${t}/${c}`);N(Array.isArray(s)?s:[]);const k=d.find(S=>String(S.centerCode)===String(a))?.title||"";y({cooperationType:c,centerTitle:k,dayOfWeek:t})}catch(s){console.error(s),i("در دریافت نتایج مشکلی رخ داد")}finally{m(!1)}}return e.jsxs("div",{className:"container mt-4",dir:"rtl",children:[e.jsx("h5",{className:"mb-3",children:"جستجوی اساتید بر اساس ترم، مرکز و روز هفته"}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"ترم"}),e.jsxs("select",{className:"form-select",value:n||"",onChange:s=>p(s.target.value),disabled:b,children:[e.jsx("option",{value:"",children:"انتخاب کنید..."}),u.map(s=>e.jsxs("option",{value:s.term,children:[s.term," ",s.active?"(ترم جاری)":""]},s.term))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"مرکز"}),e.jsxs("select",{className:"form-select",value:a,onChange:s=>f(s.target.value),disabled:j,children:[e.jsx("option",{value:"",children:"انتخاب کنید..."}),d.map(s=>e.jsx("option",{value:s.centerCode,children:s.title},s.centerCode))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"روز هفته"}),e.jsxs("select",{className:"form-select",value:t,onChange:s=>v(s.target.value),children:[e.jsx("option",{value:"",children:"انتخاب کنید..."}),C.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"نوع همکاری"}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",id:"faculty",name:"cooperationType",value:"عضو هیات علمی",checked:c==="عضو هیات علمی",onChange:s=>o(s.target.value)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:"faculty",children:"عضو هیات علمی"})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",id:"guest",name:"cooperationType",value:"مدرس مدعو",checked:c==="مدرس مدعو",onChange:s=>o(s.target.value)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:"guest",children:"مدرس مدعو"})]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{className:"btn btn-primary",onClick:T,children:"جستجو"})}),g&&e.jsx("p",{children:"در حال بارگذاری..."}),x&&e.jsx("div",{className:"alert alert-danger",children:x}),h.length>0&&r&&e.jsxs(e.Fragment,{children:[e.jsxs("h5",{className:"mb-3",children:["لیست حضور اساتید  ",r.cooperationType," "," ",r.centerTitle," در روز ",r.dayOfWeek]}),e.jsxs("table",{className:"table table-striped table-bordered mt-3",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"کد استاد"}),e.jsx("th",{children:"نام"}),e.jsx("th",{children:"نام خانوادگی"}),e.jsx("th",{children:"موبایل"}),e.jsx("th",{children:"A"}),e.jsx("th",{children:"B"}),e.jsx("th",{children:"C"}),e.jsx("th",{children:"D"}),e.jsx("th",{children:"E"})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.code}),e.jsx("td",{children:s.fname}),e.jsx("td",{children:s.lname}),e.jsx("td",{children:s.mobile}),e.jsx("td",{children:s.a}),e.jsx("td",{children:s.b}),e.jsx("td",{children:s.c}),e.jsx("td",{children:s.d}),e.jsx("td",{children:s.e})]},s.code||`${s.fname}-${s.mobile}`))})]})]})]})}export{L as default};
