import{u as I,c as L,r as a,j as e,R as O,a as W}from"./index-D92IYPEq.js";function M(){const{centers:u,loading:k}=I(),{allTerms:C,selectedTerm:h,setSelectedTerm:S,activeTerm:B,loading:T}=L(),[c,$]=a.useState("6293"),[n,D]=a.useState(""),[r,p]=a.useState("عضو هیات علمی"),[b,R]=a.useState([]),[A,N]=a.useState(!1),[f,m]=a.useState(null),[i,E]=a.useState(null),[l,d]=a.useState(1),x=30,F=["شنبه","یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه"];async function P(){if(!h||!c||!n){m("لطفاً ترم، مرکز و روز هفته را انتخاب کنید");return}N(!0),m(null);try{const s=await W.get(`/api/reports/TeachersByCenterDay/${h}/${c}/${n}/${r}`);R(Array.isArray(s)?s:[]),d(1);const t=u.find(j=>String(j.centerCode)===String(c))?.title||"";E({cooperationType:r,centerTitle:t,dayOfWeek:n})}catch(s){console.error(s),m("در دریافت نتایج مشکلی رخ داد")}finally{N(!1)}}const o=Math.ceil(b.length/x),g=(l-1)*x,v=b.slice(g,g+x);return e.jsxs("div",{className:"container mt-4",dir:"rtl",children:[e.jsx("h5",{className:"mb-3",children:"جستجوی اساتید بر اساس ترم، مرکز و روز هفته"}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"ترم"}),e.jsxs("select",{className:"form-select",value:h||"",onChange:s=>S(s.target.value),disabled:T,children:[e.jsx("option",{value:"",children:"انتخاب کنید..."}),C.map(s=>e.jsxs("option",{value:s.term,children:[s.term," ",s.active?"(ترم جاری)":""]},s.term))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"مرکز"}),e.jsxs("select",{className:"form-select",value:c,onChange:s=>$(s.target.value),disabled:k,children:[e.jsx("option",{value:"",children:"انتخاب کنید..."}),u.map(s=>e.jsx("option",{value:s.centerCode,children:s.title},s.centerCode))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"روز هفته"}),e.jsxs("select",{className:"form-select",value:n,onChange:s=>D(s.target.value),children:[e.jsx("option",{value:"",children:"انتخاب کنید..."}),F.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label d-block mb-2",children:"نوع همکاری"}),e.jsxs("div",{className:"d-flex",children:[e.jsxs("div",{className:"form-check me-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",id:"faculty",name:"cooperationType",value:"عضو هیات علمی",checked:r==="عضو هیات علمی",onChange:s=>p(s.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"faculty",children:"عضو هیات علمی"})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",id:"guest",name:"cooperationType",value:"مدرس مدعو",checked:r==="مدرس مدعو",onChange:s=>p(s.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"guest",children:"مدرس مدعو"})]})]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{className:"btn btn-primary",onClick:P,children:"جستجو"})}),A&&e.jsx("p",{children:"در حال بارگذاری..."}),f&&e.jsx("div",{className:"alert alert-danger",children:f}),v.length>0&&i&&e.jsxs(e.Fragment,{children:[e.jsxs("h5",{className:"mb-3",children:["لیست حضور اساتید ",i.cooperationType," ",i.centerTitle," در روز"," ",i.dayOfWeek]}),e.jsxs("table",{className:"table table-striped table-bordered mt-3",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"کد استاد"}),e.jsx("th",{children:"نام"}),e.jsx("th",{children:"نام خانوادگی"}),e.jsx("th",{children:"موبایل"}),e.jsx("th",{children:"A"}),e.jsx("th",{children:"B"}),e.jsx("th",{children:"C"}),e.jsx("th",{children:"D"}),e.jsx("th",{children:"E"})]})}),e.jsx("tbody",{children:v.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.code}),e.jsx("td",{children:s.fname}),e.jsx("td",{children:s.lname}),e.jsx("td",{children:s.mobile}),e.jsx("td",{children:s.a}),e.jsx("td",{children:s.b}),e.jsx("td",{children:s.c}),e.jsx("td",{children:s.d}),e.jsx("td",{children:s.e})]},s.code||`${s.fname}-${s.mobile}`))})]}),e.jsx("nav",{children:e.jsxs("ul",{className:"pagination justify-content-center",children:[e.jsx("li",{className:`page-item ${l===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>d(l-1),disabled:l===1,children:"قبلی"})}),Array.from({length:o},(s,t)=>t+1).filter(s=>s===1||s===o||s>=l-2&&s<=l+2).map((s,t,j)=>{const y=j[t-1],w=y&&s-y>1;return e.jsxs(O.Fragment,{children:[w&&e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link",children:"…"})}),e.jsx("li",{className:`page-item ${l===s?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>d(s),children:s})})]},s)}),e.jsx("li",{className:`page-item ${l===o?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>d(l+1),disabled:l===o,children:"بعدی"})})]})})]})]})}export{M as default};
