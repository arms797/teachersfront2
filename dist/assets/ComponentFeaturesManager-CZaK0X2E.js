import{r as n,j as e,a as c}from"./index-C231PI8K.js";function f(){const[m,o]=n.useState([]),[a,t]=n.useState({id:null,name:"",description:"",isActive:!1}),[r,l]=n.useState(null),[h,d]=n.useState(!1);async function i(){d(!0);try{const s=await c.get("/api/componentfeature");o(s.data||[])}catch{l("خطا در دریافت لیست کامپوننت‌ها")}finally{d(!1)}}n.useEffect(()=>{i()},[]);async function u(){try{if(!a.name.trim()){l("نام کامپوننت نباید خالی باشد");return}if(a.id){const s={description:a.description,isActive:a.isActive};await c.put(`/api/componentfeature/${a.id}`,{...a,...s})}else await c.post("/api/componentfeature",a);t({id:null,name:"",description:"",isActive:!1}),l(null),i()}catch{l("خطا در ذخیره کامپوننت")}}async function x(s,p){try{await c.put(`/api/componentfeature/${s}/toggle`,p),i()}catch{l("خطا در تغییر وضعیت کامپوننت")}}function b(s){t(s)}return e.jsxs("div",{className:"container mt-4",children:[e.jsx("h5",{className:"mb-3",children:"مدیریت کامپوننت‌ها"}),e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label small",children:"نام کامپوننت"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:a.name,onChange:s=>t({...a,name:s.target.value}),disabled:!!a.id})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label small",children:"توضیحات"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"form-check form-check-inline mb-2",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",checked:a.isActive,onChange:s=>t({...a,isActive:s.target.checked})}),e.jsx("label",{className:"form-check-label small",children:"فعال"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("button",{className:"btn btn-success btn-sm me-2",onClick:u,children:a.id?"ذخیره تغییرات":"افزودن کامپوننت"}),a.id&&e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>t({id:null,name:"",description:"",isActive:!1}),children:"انصراف"})]})]})}),h?e.jsx("div",{children:"در حال بارگذاری..."}):r?e.jsx("div",{className:"alert alert-danger",children:r}):e.jsxs("table",{className:"table table-bordered table-hover table-sm align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"small",children:"نام"}),e.jsx("th",{className:"small",children:"توضیحات"}),e.jsx("th",{className:"small",children:"فعال؟"}),e.jsx("th",{className:"small",children:"عملیات"})]})}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"small",children:s.name}),e.jsx("td",{className:"small",children:s.description}),e.jsx("td",{className:"small",children:s.isActive?"✅":"❌"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>b(s),children:"ویرایش"}),e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>x(s.id,!s.isActive),children:s.isActive?"غیرفعال":"فعال"})]})]},s.id))})]})]})}export{f as default};
